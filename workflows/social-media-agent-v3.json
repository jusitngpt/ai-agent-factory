{ "name": "[KAF] Social Media Agent-4 V3 - Multi-Platform Distribution", "nodes": [ { "parameters": { "pollTimes": { "item": [ { "mode": "everyMinute" } ] }, "authentication": "airtableTokenApi", "baseId": { "__rl": true, "value": "appELRlEUB59eOw3q", "mode": "id" }, "tableId": { "__rl": true, "value": "tblPBQpl089R6gzzm", "mode": "id" }, "triggerField": "New Article Posted", "additionalFields": {} }, "name": "Airtable Trigger - New Content", "type": "n8n-nodes-base.airtableTrigger", "typeVersion": 1, "position": [ 256, 352 ], "notesInFlow": true, "id": "df7f2ae0-c4b7-43f0-b859-0d6099f1fce7", "credentials": { "airtableTokenApi": { "id": "FtnbunP4DdyOkkW4", "name": "Airtable Personal Access Token account 2" } }, "notes": "Triggers when new record created with Status = Pending" }, { "parameters": { "operation": "update", "base": { "__rl": true, "value": "appELRlEUB59eOw3q", "mode": "list", "cachedResultName": "Katalon Agent Factory", "cachedResultUrl": "https://airtable.com/appELRlEUB59eOw3q" }, "table": { "__rl": true, "value": "tblPBQpl089R6gzzm", "mode": "list", "cachedResultName": "Social Media Content Pipeline", "cachedResultUrl": "https://airtable.com/appELRlEUB59eOw3q/tblPBQpl089R6gzzm" }, "columns": { "mappingMode": "defineBelow", "value": { "id": "={{ $('Airtable Trigger - New Content').item.json.id }}", "Status": "Processing", "Article Text": "={{ $json.content.parts[0].text }}", "Processing Time (Seconds)": 0, "Total Cost": 0, "Gemini Tokens Used": 0, "Nano Banana Cost": 0 }, "matchingColumns": [ "id" ], "schema": [ { "id": "id", "displayName": "id", "required": false, "defaultMatch": true, "display": true, "type": "string", "readOnly": true, "removed": false }, { "id": "Campaign Title", "displayName": "Campaign Title", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Source URL", "displayName": "Source URL", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Status", "displayName": "Status", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "options", "options": [ { "name": "Pending", "value": "Pending" }, { "name": "Processing", "value": "Processing" }, { "name": "Complete", "value": "Complete" }, { "name": "Error", "value": "Error" } ], "readOnly": false, "removed": false }, { "id": "Priority", "displayName": "Priority", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "options", "options": [ { "name": "High", "value": "High" }, { "name": "Medium", "value": "Medium" }, { "name": "Low", "value": "Low" } ], "readOnly": false, "removed": true }, { "id": "Article Text", "displayName": "Article Text", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Tweet Content", "displayName": "Tweet Content", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Long Post Content", "displayName": "Long Post Content", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Image Prompt", "displayName": "Image Prompt", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Generated Image URL", "displayName": "Generated Image URL", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Twitter Post URL", "displayName": "Twitter Post URL", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Twitter Post ID", "displayName": "Twitter Post ID", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Facebook Post URL", "displayName": "Facebook Post URL", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Facebook Post ID", "displayName": "Facebook Post ID", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "LinkedIn Post URL", "displayName": "LinkedIn Post URL", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "LinkedIn Post ID", "displayName": "LinkedIn Post ID", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Instagram Status", "displayName": "Instagram Status", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "options", "options": [ { "name": "Not Posted", "value": "Not Posted" }, { "name": "Posted", "value": "Posted" }, { "name": "Error", "value": "Error" }, { "name": "Scheduled", "value": "Scheduled" } ], "readOnly": false, "removed": false }, { "id": "Created Date", "displayName": "Created Date", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "dateTime", "readOnly": false, "removed": false }, { "id": "Last Updated", "displayName": "Last Updated", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "dateTime", "readOnly": false, "removed": false }, { "id": "Processing Time (Seconds)", "displayName": "Processing Time (Seconds)", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "number", "readOnly": false, "removed": false }, { "id": "Total Cost", "displayName": "Total Cost", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "number", "readOnly": false, "removed": false }, { "id": "Gemini Tokens Used", "displayName": "Gemini Tokens Used", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "number", "readOnly": false, "removed": false }, { "id": "Nano Banana Cost", "displayName": "Nano Banana Cost", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "number", "readOnly": false, "removed": false }, { "id": "Error Log", "displayName": "Error Log", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Notes", "displayName": "Notes", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": false, "removed": false }, { "id": "Tags", "displayName": "Tags", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "array", "options": [ { "name": "Tech", "value": "Tech" }, { "name": "Marketing", "value": "Marketing" }, { "name": "Sales", "value": "Sales" }, { "name": "Product", "value": "Product" }, { "name": "Industry News", "value": "Industry News" }, { "name": "Thought Leadership", "value": "Thought Leadership" } ], "readOnly": false, "removed": false }, { "id": "New Article Posted", "displayName": "New Article Posted", "required": false, "defaultMatch": false, "canBeUsedToMatch": true, "display": true, "type": "string", "readOnly": true, "removed": true } ], "attemptToConvertTypes": false, "convertFieldsToString": false }, "options": {} }, "name": "Airtable - Save Clean Text", "type": "n8n-nodes-base.airtable", "typeVersion": 2, "position": [ 832, 352 ], "notesInFlow": true, "id": "6326a183-e935-4a0e-91c7-8edeb1dfe394", "credentials": { "airtableTokenApi": { "id": "FtnbunP4DdyOkkW4", "name": "Airtable Personal Access Token account 2" } }, "notes": "Saves cleaned text and updates status to Processing" }, { "parameters": { "text": "={{ $json.content.parts[0].text }}", "additionalFields": {} }, "name": "Twitter - Post Tweet", "type": "n8n-nodes-base.twitter", "typeVersion": 1, "position": [ 2112, 256 ], "id": "2459a41e-069d-4c52-9306-5b94e872ac7d" }, { "parameters": { "operation": "update", "base": { "__rl": true, "mode": "list", "value": "" }, "table": "Social Media Content Pipeline", "columns": { "mappingMode": "defineBelow", "value": {} }, "options": {} }, "name": "Airtable - Save Twitter URL", "type": "n8n-nodes-base.airtable", "typeVersion": 2, "position": [ 2336, 256 ], "id": "f8530e4d-54d1-4665-9778-51ad47ae1778", "credentials": { "airtableTokenApi": { "id": "FtnbunP4DdyOkkW4", "name": "Airtable Personal Access Token account 2" } } }, { "parameters": { "text": "={{ $('Generate Long Message').item.json.content.parts[0].text }}", "shareMediaCategory": "IMAGE", "binaryPropertyName": "={{ $json.id }}", "additionalFields": {} }, "name": "LinkedIn - Post Content", "type": "n8n-nodes-base.linkedIn", "typeVersion": 1, "position": [ 2112, 448 ], "id": "ed08b612-d8b9-406d-b264-9bf5fdf98eef" }, { "parameters": { "operation": "update", "base": { "__rl": true, "mode": "list", "value": "" }, "table": "Social Media Content Pipeline", "columns": { "mappingMode": "defineBelow", "value": {} }, "options": {} }, "name": "Airtable - Save LinkedIn URL", "type": "n8n-nodes-base.airtable", "typeVersion": 2, "position": [ 2336, 448 ], "id": "cf9b6976-6c50-461d-8723-61ab38694657", "credentials": { "airtableTokenApi": { "id": "FtnbunP4DdyOkkW4", "name": "Airtable Personal Access Token account 2" } } }, { "parameters": { "operation": "update", "base": { "__rl": true, "mode": "list", "value": "" }, "table": "Social Media Content Pipeline", "columns": { "mappingMode": "defineBelow", "value": {} }, "options": {} }, "name": "Airtable - Set Complete Status", "type": "n8n-nodes-base.airtable", "typeVersion": 2, "position": [ 2560, 352 ], "notesInFlow": true, "id": "4d9a64d1-e361-4278-8982-9cf70cf92030", "credentials": { "airtableTokenApi": { "id": "FtnbunP4DdyOkkW4", "name": "Airtable Personal Access Token account 2" } }, "notes": "Final status update - workflow complete" }, { "parameters": { "modelId": { "__rl": true, "value": "models/gemini-2.5-pro", "mode": "list", "cachedResultName": "models/gemini-2.5-pro" }, "messages": { "values": [ { "content": "=You are an expert content extraction specialist. Your task is to extract ONLY the main article content from the raw HTML provided.\n\nEXTRACTION RULES:\n1. Remove ALL HTML tags, JavaScript, CSS, navigation elements, headers, footers, sidebars, and advertisements\n2. Remove cookie banners, subscription popups, and related articles sections\n3. Preserve the original paragraph structure and line breaks\n4. Keep the natural flow and formatting of the article body\n5. Do NOT add commentary, summaries, or any text not in the original article\n6. Do NOT include author bios, publication dates, or metadata\n\nOUTPUT REQUIREMENTS:\n- Clean, readable text only\n- Preserve paragraph breaks with double line breaks\n- No HTML entities or special characters\n- No markdown formatting\n\nArticle link: {{ $json.fields['Source URL'] }}" } ] }, "options": {} }, "type": "@n8n/n8n-nodes-langchain.googleGemini", "typeVersion": 1, "position": [ 480, 352 ], "id": "10086ab4-6413-4cd1-a6b8-fa8f45d0104d", "name": "Message a model", "credentials": { "googlePalmApi": { "id": "JpCnJlmNYk1qexN5", "name": "Google Gemini(PaLM) Api account" } } }, { "parameters": { "url": "={{ $json.fields['Source URL'] }}", "options": {} }, "type": "n8n-nodes-base.httpRequestTool", "typeVersion": 4.3, "position": [ 560, 576 ], "id": "68fe3b20-b4a2-4d73-9255-8ca31851cc83", "name": "HTTP Request" }, { "parameters": { "modelId": { "__rl": true, "value": "models/gemini-2.5-pro", "mode": "list", "cachedResultName": "models/gemini-2.5-pro" }, "messages": { "values": [ { "content": "=You are a professional content strategist who crafts thought leadership posts that drive meaningful engagement on LinkedIn and Facebook.\n\nMISSION:\nTransform the article below into a compelling narrative that educates, challenges assumptions, and sparks professional discussion.\n\nAUDIENCE: Mid-to-senior level professionals in tech, marketing, and business leadership\n\nPOST STRUCTURE:\n\nOpening Hook (2-3 sentences)\nStart with ONE of these proven patterns:\n- Surprising statistic or data point\n- Contrarian observation\n- Personal story or "I noticed" statement\n- Pattern that others might have missed\n- Bold prediction or trend insight\n\nBody Content (3-4 short paragraphs)\n- Paragraph 1: Expand on the hook - why it matters NOW\n- Paragraph 2: The core insight or framework from the article\n- Paragraph 3: Practical implications or what this means for readers\n- Optional Paragraph 4: Future outlook or emerging patterns\n\nUse these engagement techniques:\n✓ Break paragraphs every 2-3 sentences for readability\n✓ Include 1 bulleted list IF it clarifies complex information\n✓ Use line breaks strategically for emphasis\n✓ Reference concrete examples or case studies\n\nClosing CTA (2-3 sentences)\nEnd with ONE of these:\n- Thought-provoking question to drive comments\n- Forward-looking perspective\n- Call for community input ("What are you seeing?")\n- Challenge to conventional thinking\n\nHashtags (3-5 relevant hashtags)\n\nTONE GUIDELINES:\n✓ Professional yet conversational\n✓ Confident without being arrogant\n✓ Insightful without being preachy\n✓ Data-informed storytelling\n\nSTYLE RULES:\n- Write in first-person when sharing insights ("I've noticed...")\n- Use "you" to connect with readers\n- Vary sentence length for rhythm\n- Replace jargon with clear language\n- Show, don't just tell\n\nFORBIDDEN ELEMENTS:\n❌ Generic opening lines ("In today's fast-paced world...")\n❌ Overused phrases ("synergy," "game-changer," "disruption")\n❌ Excessive emoji use\n❌ Clickbait language\n❌ Self-promotional content\n\nLENGTH TARGET: 1200-1500 characters (optimal for LinkedIn algorithm)\n\nARTICLE TEXT:\n---\n{{ $('Message a model').item.json.content.parts[0].text }}\n\n---\nOUTPUT FORMAT:\n[Your hook]\n\n[Body paragraph 1]\n\n[Body paragraph 2]\n\n[Body paragraph 3]\n\n[Closing CTA]\n\n#Hashtag1 #Hashtag2 #Hashtag3 #Hashtag4 #Hashtag5" } ] }, "options": {} }, "type": "@n8n/n8n-nodes-langchain.googleGemini", "typeVersion": 1, "position": [ 1056, 448 ], "id": "956e8f8a-3968-4f5b-9c0c-d19b4a2530ce", "name": "Generate Long Message", "credentials": { "googlePalmApi": { "id": "JpCnJlmNYk1qexN5", "name": "Google Gemini(PaLM) Api account" } } }, { "parameters": { "modelId": { "__rl": true, "value": "models/gemini-2.5-pro", "mode": "list", "cachedResultName": "models/gemini-2.5-pro" }, "messages": { "values": [ { "content": "=You are a viral social media strategist specializing in short-form content that drives engagement on Twitter and Threads.\n\nCONTEXT:\nAnalyze the article below and create a compelling micro-post that captures attention and sparks conversation.\n\nCONTENT REQUIREMENTS:\n✓ Maximum 280 characters (including spaces)\n✓ Lead with a provocative hook or surprising insight\n✓ Use conversational, authoritative tone\n✓ Include ONE of these engagement tactics:\n - Bold contrarian take\n - Thought-provoking question\n - Counterintuitive insight\n - Pattern interrupt statement\n\nSTRUCTURE:\n1. Opening hook (1-2 sentences)\n2. Line break\n3. 3-4 high-traffic hashtags (research-backed)\n\nSTYLE GUIDE:\n- Write like you're explaining to a smart colleague over coffee\n- Avoid buzzwords and corporate speak\n- No emojis unless they add genuine value\n- No generic statements like "Game-changer!" or "Revolutionary!"\n\nFORBIDDEN PHRASES:\n❌ "In today's world"\n❌ "It's important to note"\n❌ "Let's dive in"\n❌ "Here's the thing"\n❌ "Unpopular opinion"\n\nDO NOT include URLs or mentions.\n\nARTICLE TEXT:\n---\n{{ $('Airtable - Save Clean Text').item.json.fields['Article Text'] }}\n\n---\nOUTPUT FORMAT:\n[Your compelling tweet]\n\n#Hashtag1 #Hashtag2 #Hashtag3 #Hashtag4" } ] }, "options": {} }, "type": "@n8n/n8n-nodes-langchain.googleGemini", "typeVersion": 1, "position": [ 1760, 256 ], "id": "225fc507-e178-4dea-b5a4-60cbb72d8c40", "name": "Generate Tweet", "credentials": { "googlePalmApi": { "id": "JpCnJlmNYk1qexN5", "name": "Google Gemini(PaLM) Api account" } } }, { "parameters": { "modelId": { "__rl": true, "value": "models/gemini-3-pro-preview", "mode": "list", "cachedResultName": "models/gemini-3-pro-preview" }, "messages": { "values": [ { "content": "=You are an expert prompt engineer for photorealistic AI image generation. Your task is to create a single, highly detailed prompt for Nano Banana that visually represents the core theme of the social media post.\n\nOBJECTIVE:\nTransform the abstract concepts from the post into a concrete, visually striking image that captures attention in social media feeds.\n\nVISUAL STRATEGY:\nThe generated image should:\n- Instantly communicate the post's main theme\n- Stop scrollers in their tracks\n- Work at thumbnail size\n- Be professional yet eye-catching\n- Avoid literal interpretations (think metaphorical/conceptual)\n\nPROMPT COMPONENTS TO INCLUDE:\n\nSubject Matter\n- What is the primary focus? (person, object, scene, concept)\n- What action or state are they in?\n- Level of detail needed (close-up, medium, wide shot)\n\nVisual Composition\n- Camera angle: (eye-level, bird's eye, low angle, dutch tilt)\n- Framing: (rule of thirds, centered, negative space)\n- Depth of field: (shallow focus, deep focus, bokeh effect)\n\nLighting & Atmosphere\n- Lighting type: (cinematic, studio, natural, dramatic, soft diffused)\n- Time of day feel: (golden hour, blue hour, midday, night)\n- Mood lighting: (high contrast, low key, high key, moody)\n\nColor Palette\n- Primary colors: (vibrant, muted, monochromatic, complementary)\n- Color temperature: (warm, cool, neutral)\n- Saturation level: (highly saturated, desaturated, balanced)\n\nStyle & Aesthetic\n- Visual style: (photorealistic, cinematic, editorial, minimalist, futuristic)\n- Professional quality: (commercial photography, magazine cover, corporate aesthetic)\n- Reference style if helpful: ("shot on Sony A7III," "National Geographic style")\n\nMood & Emotion\n- Overall feeling: (optimistic, serious, innovative, dynamic, calm)\n- Energy level: (high energy, contemplative, urgent, peaceful)\n\nTechnical Specifications\n- Image quality: "ultra high resolution, sharp focus, professional photography"\n- Composition: "professional composition, rule of thirds, balanced framing"\n\nFORMATTING RULES:\n1. Write as ONE continuous prompt (not bullet points)\n2. Use comma-separated descriptors\n3. Place most important elements first\n4. Include technical quality markers\n5. Be specific but concise (aim for 150-200 words)\n6. Avoid abstract concepts - make everything concrete and visual\n\nFORBIDDEN ELEMENTS:\n❌ Text or typography in the image\n❌ Logos or brand names\n❌ Faces of real people (generic people are OK)\n❌ Overly literal interpretations\n❌ Low quality descriptors\n\nEXAMPLE GOOD PROMPT:\n"Futuristic office environment with transparent holographic displays showing data analytics, shot from a low angle in a modern glass building, cinematic lighting with warm golden hour glow streaming through floor-to-ceiling windows, selective focus on central display with bokeh effect in background, color palette of deep blues and warm oranges, ultra high resolution, professional commercial photography, shot on Sony A7III with 24mm lens, f/2.8, dynamic composition, innovative and optimistic mood, sleek minimalist aesthetic"\n\nSOCIAL MEDIA POST TO VISUALIZE:\n---\n{{ $json.content.parts[0].text }}\n\n---\nOUTPUT: Provide ONLY the image generation prompt, no explanations or additional text." } ] }, "options": {} }, "type": "@n8n/n8n-nodes-langchain.googleGemini", "typeVersion": 1, "position": [ 1408, 448 ], "id": "bedbbc5b-6506-43b5-b251-fe2a846399dd", "name": "Generate Image Prompt", "credentials": { "googlePalmApi": { "id": "JpCnJlmNYk1qexN5", "name": "Google Gemini(PaLM) Api account" } } }, { "parameters": { "resource": "image", "modelId": { "__rl": true, "value": "models/gemini-2.5-flash-image", "mode": "list", "cachedResultName": "models/gemini-2.5-flash-image (Nano Banana)" }, "prompt": "={{ $json.content.parts[0].text }}", "options": {} }, "type": "@n8n/n8n-nodes-langchain.googleGemini", "typeVersion": 1, "position": [ 1824, 448 ], "id": "7d54fb94-f81a-436b-932e-e46d567905e4", "name": "Generate an image", "credentials": { "googlePalmApi": { "id": "JpCnJlmNYk1qexN5", "name": "Google Gemini(PaLM) Api account" } } } ], "pinData": {}, "connections": { "Airtable Trigger - New Content": { "main": [ [ { "node": "Message a model", "type": "main", "index": 0 } ] ] }, "Airtable - Save Clean Text": { "main": [ [ { "node": "Generate Tweet", "type": "main", "index": 0 }, { "node": "Generate Long Message", "type": "main", "index": 0 } ] ] }, "Twitter - Post Tweet": { "main": [ [ { "node": "Airtable - Save Twitter URL", "type": "main", "index": 0 } ] ] }, "Airtable - Save Twitter URL": { "main": [ [ { "node": "Airtable - Set Complete Status", "type": "main", "index": 0 } ] ] }, "LinkedIn - Post Content": { "main": [ [ { "node": "Airtable - Save LinkedIn URL", "type": "main", "index": 0 } ] ] }, "Airtable - Save LinkedIn URL": { "main": [ [ { "node": "Airtable - Set Complete Status", "type": "main", "index": 0 } ] ] }, "HTTP Request": { "ai_tool": [ [ { "node": "Message a model", "type": "ai_tool", "index": 0 } ] ] }, "Message a model": { "main": [ [ { "node": "Airtable - Save Clean Text", "type": "main", "index": 0 } ] ] }, "Generate Tweet": { "main": [ [ { "node": "Twitter - Post Tweet", "type": "main", "index": 0 } ] ] }, "Generate Long Message": { "main": [ [ { "node": "Generate Image Prompt", "type": "main", "index": 0 } ] ] }, "Generate Image Prompt": { "main": [ [ { "node": "Generate an image", "type": "main", "index": 0 } ] ] }, "Generate an image": { "main": [ [ { "node": "LinkedIn - Post Content", "type": "main", "index": 0 } ] ] } }, "active": false, "settings": { "saveExecutionProgress": true, "saveManualExecutions": true, "saveDataErrorExecution": "all", "saveDataSuccessExecution": "all", "executionTimeout": 3600, "timezone": "UTC" }, "versionId": "456d5358-0216-4a55-b884-ac8f42143089", "meta": { "instanceId": "d422a02969380266aab4ff16dff35a7fec79c784c7ae5f5d0b2768f0ec8aa943" }, "id": "EFR7nvwO9690x54x", "tags": [] }
